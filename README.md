# Apptica Top Category API

API-—Å–µ—Ä–≤–∏—Å –Ω–∞ Laravel, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ—Ç, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ª—É—á—à–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —Å —Å–µ—Ä–≤–∏—Å–∞ Apptica. –†–µ—à–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏ Backend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º MVC-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ Laravel.

---

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

–°–µ—Ä–≤–∏—Å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ API Apptica –∏ –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ø-–ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (app_id = 1421444) –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –Ω–∞ –∑–∞–¥–∞–Ω–Ω—É—é –¥–∞—Ç—É. –í –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª—É—á—à–∞—è (–Ω–∞–∏–º–µ–Ω—å—à–∞—è) –ø–æ–∑–∏—Ü–∏—è –ø–æ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏. –†–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ endpoint –≤ –≤–∏–¥–µ JSON.

---

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ø-–ø–æ–∑–∏—Ü–∏–π —Å API Apptica (–ø–æ –¥–∞—Ç–µ)

- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∏–º–µ–Ω—å—à—É—é –ø–æ–∑–∏—Ü–∏—é –≤ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ firstOrCreate

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–Ω–æ–π –¥–∞—Ç—ã —Å—Ç—Ä–æ–≥–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD

- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∏ –æ—à–∏–±–æ—á–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ API

- –ü—Ä–æ–ø—É—Å–∫ API-–∑–∞–ø—Ä–æ—Å–∞, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –µ—Å—Ç—å –≤ –ë–î

- **–ë–æ–Ω—É—Å**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Äî 5 –≤ –º–∏–Ω—É—Ç—É —Å –æ–¥–Ω–æ–≥–æ IP

- **–ë–æ–Ω—É—Å**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (IP, –¥–∞—Ç–∞, —Ç–∞–π–º—Å—Ç–µ–º–ø)

- **–ë–æ–Ω—É—Å**: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Docker —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π Nginx, PHP-FPM –∏ MySQL
---

## ‚úÖ –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

**GET** `/api/appTopCategory?date=2025-08-18`

**Response:**

```json
{
  "status_code": 200,
  "message": "ok",
  "data": {
    "1": 50,
    "3": 109,
    "9": 64
  }
}
```

*(where "2" and "23" are category IDs and values are best positions)*

üì∑ ![–°–∫—Ä–∏–Ω—à–æ—Ç: Resonse Example](screenshots/responseExample.png)

---

## üß™ –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

| Case                        | Status Code | Message |
|-----------------------------|-------------|---------|
| Valid date                 | 200         | ok |
| Invalid date (`2025-06-31`) | 422         | Validation error |
| Date missing                | 422         | Validation error |
| API returns no data         | 200         | "No data found" (logged) |
| API 500 / timeout           | 500         | Error logged, fallback response |
| More than 5 requests/min    | 429         | Throttle exception |

---

‚öôÔ∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É –±–µ–∑ Docker

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –Ω–∞ –æ—Å–Ω–æ–≤–µ .env.example

3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:

```bash
php artisan migrate
```
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:

```bash
php artisan serve --port=8888
```
5. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost:8888/api/appTopCategory?date=2025-08-18
```


---
üê≥ Docker (–±–æ–Ω—É—Å)

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç Docker-–Ω–∞—Å—Ç—Ä–æ–π–∫—É –¥–ª—è –ª—ë–≥–∫–æ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å PHP –∏–ª–∏ MySQL –Ω–∞ —Å–∏—Å—Ç–µ–º—É.

–®–∞–≥–∏ –∑–∞–ø—É—Å–∫–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ .env.docker –≤ .env:
```bash
cp .env.docker .env
```
2. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
```bash
docker compose up -d
```
3. –û—Ç–∫—Ä–æ–π—Ç–µ API –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ Postman:
```bash
http://localhost:9000/api/appTopCategory?date=2025-08-18

```

---


## üß© –ë–æ–Ω—É—Å: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### 1. –í–∫–ª—é—á–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: 5 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É –Ω–∞ IP —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º middleware Laravel.


```json
{
  "message": "Too Many Attempts."
}
```

![–°–∫—Ä–∏–Ω—à–æ—Ç: limitedAttempts](screenshots/limitedAttempts.png)
---

### 2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ö–∞–∂–¥–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ endpoint –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è (IP, –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–∞—Ç—ã, –≤—Ä–µ–º—è):

```
[2025-08-21 04:01:21] local.INFO: AppTopCategory endpoint hit {"ip":"127.0.0.1","date_param":"2025-08-18","timestamp":"2025-08-21 04:01:21"}
[2025-08-21 04:01:21] local.INFO: Data for date 2025-08-18 already exists, skipping API call.
```

![–°–∫—Ä–∏–Ω—à–æ—Ç: Logging](screenshots/logging.png)


## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLite –≤ –ø–∞–º—è—Ç–∏ (in-memory).

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

```bash
php artisan test --filter=AppTopCategoryApiTest

```

- –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Å–ª—É—á–∞–∏:

- –ù–µ–≤–µ—Ä–Ω–∞—è –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–∞—è –¥–∞—Ç–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 422

- –ß–∞—Å—Ç–∏—á–Ω–∞—è –¥–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2025-07) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 422

- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã (07-25-2025) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 422

- –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –æ—Ç API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404

- –û—à–∏–±–∫–∞ 500 –æ—Ç API –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–∞ API

![–°–∫—Ä–∏–Ω—à–æ—Ç: Testing](screenshots/testCases.png)

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ Http/Controllers/AppTopCategoryController.php
‚îÇ   ‚îú‚îÄ‚îÄ Services/AppticaTopService.php
‚îÇ   ‚îú‚îÄ‚îÄ Models/AppTopPosition.php
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îî‚îÄ‚îÄ api.php
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ Feature/AppTopCategoryTest.php
```

---

## üß† –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –î–∞–Ω–Ω—ã–µ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ API —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –±–∞–∑–µ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É.

- firstOrCreate –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ app_top_positions.

- –ü–æ–≤–µ–¥–µ–Ω–∏–µ API –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è, –≤–∫–ª—é—á–∞—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏ ‚Äî –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –æ—Ç–ª–∞–¥–∫–∏.

---

